(this["webpackJsonpent-vote-app"]=this["webpackJsonpent-vote-app"]||[]).push([[8],{104:function(e,t,a){"use strict";a.r(t);var s=a(14),n=a(15),i=a(17),c=a(16),l=a(0),h=a.n(l),o=(a(50),a(1)),r=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"isMyChat",value:function(){return!1}},{key:"render",value:function(){return Object(o.jsxs)("div",{className:"chat",children:[Object(o.jsx)("div",{className:"user-photo",children:Object(o.jsx)("div",{className:"user-name",children:this.props.name})}),Object(o.jsx)("p",{className:"chat-msg "+(this.props.isMine?"me ":"friend "),children:this.props.message})]})}}]),a}(h.a.Component),u=["\uac81\uba39\uc740","\uc2e0\ub09c","\ubb34\uc11c\uc6b4","\ud654\ub09c","\ub611\ub611\ud55c","\uadc0\uc5ec\uc6b4","\ud589\ubcf5\ud55c"],m=["\uc544\uae30\ub3fc\uc9c0","\uae40\uc885\ubb38","\uc2e0\ub300\uc7a5","\uae40\ud638\ub4e4","\uc720\ub290\ub2d8","\ud53c\uc624","\ucc9c\ud574\uba85","\uc7a5\uae30\ub450"],d=function(e){return Math.floor(Math.random()*e)},j=a(70),v=null,p=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={chatId:"",displayName:"",chatValue:"",chatlogs:[]},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.initializeDisplayName().then((function(t){e.initializeChatServer(t)}))}},{key:"initializeChatServer",value:function(e){(v=j("ws://0.0.0.0:8080",{reconnectionDelayMax:1e4})).emit("login",{id:e}),this.listenChatEvent()}},{key:"initializeDisplayName",value:function(){var e=this;return new Promise((function(t,a){var s=u[d(u.length)],n=m[d(m.length)];console.log(s,n),e.setState({displayName:s+n},(function(){console.log(e.state.displayName),t(e.state.displayName)}))}))}},{key:"listenChatEvent",value:function(){var e=this;v.on("chat",(function(t){var a=e.state.chatlogs;a.push(t),console.log("chatlogs > ",a),e.setState({chatlogs:a})}))}},{key:"handleChatValueChange",value:function(e){var t=e.target.value;this.setState({chatValue:t})}},{key:"handleBoardcastChat",value:function(){v.emit("chat",{name:this.state.displayName,value:this.state.chatValue})}},{key:"render",value:function(){var e=this;return Object(o.jsx)("div",{className:"chat-background",children:Object(o.jsxs)("div",{className:"chat-box",children:[Object(o.jsxs)("div",{className:"chat-logs",children:[Object(o.jsx)(r,{name:"\uac81\uba39\uc740\ucc9c\ud574\uba85",message:"\ud638\ub4e4\ud638\ub4e4 \uae40\ud638\ub4e4 \ud654\uc774\ud305! \ud638\ub4e4\ud638\ub4e4 \uae40\ud638\ub4e4 \ud654\uc774\ud305! \ud638\ub4e4\ud638\ub4e4 \uae40\ud638\ub4e4 \ud654\uc774\ud305! \ud638\ub4e4\ud638\ub4e4 \uae40\ud638\ub4e4 \ud654\uc774\ud305! \ud638\ub4e4\ud638\ub4e4 \uae40\ud638\ub4e4 \ud654\uc774\ud305! \ud638\ub4e4\ud638\ub4e4 \uae40\ud638\ub4e4 \ud654\uc774\ud305!"}),Object(o.jsx)(r,{name:"\ub2e8\uc11c\ucc3e\uc740\uc720\ubcd1\uc7ac",message:"\uc5ed\uc2dc \uc720\ub290\ub2d8!"}),Object(o.jsx)(r,{name:"\ub180\ub780\uc2e0\ub3d9",message:"\uacb0\uad6d \uc2e0\ub3d9\uc774 \ub2e4 \ud478\ub294\ub4ef"}),this.state.chatlogs.map((function(t,a){var s=t.name===e.state.displayName;return Object(o.jsx)(r,{isMine:s,name:t.name,message:t.value},a)}))]}),Object(o.jsxs)("div",{className:"chat-form",children:[Object(o.jsx)("input",{className:"chat-text",type:"text",value:this.state.chatValue,onChange:this.handleChatValueChange.bind(this)}),Object(o.jsx)("button",{className:"chat-btn--snd",onClick:this.handleBoardcastChat.bind(this),children:Object(o.jsx)("i",{className:"fas fa-keyboard"})})]})]})})}}]),a}(h.a.Component);t.default=p},50:function(e,t,a){}}]);
//# sourceMappingURL=8.ae3b496e.chunk.js.map